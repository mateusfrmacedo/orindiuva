<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="description" content="Acompanhe Orindi√∫va e Regi√£o ao vivo.">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

<meta property="og:type" content="website">
<meta property="og:title" content="Orindi√∫va e Regi√£o Ao Vivo">
<meta property="og:description" content="Monitoramento do clima em tempo real: Orindi√∫va, Rio Preto e SP.">
<meta property="og:image" content=""> 

<meta name="theme-color" content="#f2f2f7" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#141414" media="(prefers-color-scheme: dark)">

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå•Ô∏è</text></svg>">

<title>Orindi√∫va e Regi√£o</title>

<style>
:root {
  --sf: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  
  /* Cores Light */
  --bg-light: #f2f2f7;
  --text-light: #1c1c1e;
  --glass-light: #ffffff;
  --border-light: rgba(0, 0, 0, 0.05);
  --shadow-light: 0 4px 12px rgba(0,0,0,0.06);
  --detail-bg-light: rgba(0,0,0,0.04);

  /* Cores Dark */
  --bg-dark: #141414;
  --text-dark: #f2f2f7;
  --glass-dark: #1c1c1e;
  --border-dark: rgba(255, 255, 255, 0.1);
  --shadow-dark: 0 4px 12px rgba(0,0,0,0.5);
  --detail-bg-dark: rgba(255,255,255,0.06);
}

* { box-sizing: border-box; }

html, body {
  margin: 0; padding: 0; height: 100%;
  font-family: var(--sf);
  background-color: var(--bg-light);
  color: var(--text-light);
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow-x: hidden;
}

body.dark {
  background-color: var(--bg-dark);
  color: var(--text-dark);
}

/* Layout */
.site {
  max-width: 1000px;
  margin: 0 auto;
  padding: 40px 24px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Header */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 25px;
}

.title-box h1 {
  margin: 0;
  font-size: clamp(32px, 6vw, 56px); /* Levemente menor para caber em mobile */
  font-weight: 800;
  letter-spacing: -2px;
  line-height: 1.1;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 700;
  color: #ff3b30;
  background: rgba(255, 59, 48, 0.1);
  padding: 4px 10px;
  border-radius: 20px;
  margin-top: 8px;
  text-transform: uppercase;
}
.pulse {
  width: 8px; height: 8px;
  background: currentColor;
  border-radius: 50%;
  animation: pulse 1.5s infinite;
}
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: .4; } 100% { opacity: 1; } }

/* Bot√£o Tema */
.theme-toggle {
  width: 44px; height: 44px;
  border-radius: 50%;
  border: 1px solid var(--border-light);
  cursor: pointer;
  background: var(--glass-light);
  box-shadow: var(--shadow-light);
  display: grid; place-items: center;
  padding: 0; font-size: 22px; line-height: 1;
  transition: all 0.3s;
}
body.dark .theme-toggle {
  background: var(--glass-dark);
  border: 1px solid var(--border-dark);
  box-shadow: var(--shadow-dark);
}
.theme-toggle:active { transform: scale(0.92); }
.theme-toggle span { user-select: none; }

/* --- V√çDEO --- */
.video-container {
  position: relative;
  width: 100%;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0,0,0,0.12);
  aspect-ratio: 16/9;
  background: #000;
  margin-bottom: 24px;
}
.video-container iframe { width: 100%; height: 100%; border: 0; }

/* --- DASHBOARD --- */
.dashboard-card {
  background: var(--glass-light);
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-light);
  border-radius: 24px;
  padding: 24px;
  margin-bottom: 24px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
body.dark .dashboard-card {
  background: var(--glass-dark);
  border: 1px solid var(--border-dark);
  box-shadow: var(--shadow-dark);
}

/* Topo: Clima Atual + Rel√≥gio */
.dash-top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}
.current-weather h2 { margin: 0; font-size: 42px; font-weight: 700; letter-spacing: -1px; }
.current-weather p { margin: 4px 0 0; font-size: 18px; font-weight: 500; opacity: 0.8; }

.clock-area { text-align: right; }
.clock-time { font-size: 28px; font-weight: 600; font-variant-numeric: tabular-nums; }
.clock-date { font-size: 14px; opacity: 0.6; margin-top: 4px; text-transform: capitalize; }

/* --- LETREIRO DE NOT√çCIAS (ESTILO DIGITAL/LED) --- */
.ticker-wrap {
  width: 100%;
  overflow: hidden;
  background-color: #000;
  padding: 12px 0;
  border-radius: 8px;
  border: 2px solid #333;
  white-space: nowrap;
  box-sizing: border-box;
  margin-top: -10px;
  margin-bottom: 5px;
  position: relative;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.9);
}

.ticker {
  display: inline-block;
  white-space: nowrap;
  padding-left: 100%;
}

.ticker-item {
  display: inline-block;
  padding: 0 20px;
  font-family: 'VT323', monospace;
  font-size: 26px; 
  letter-spacing: 1.5px;
  color: #00ff41;
  text-shadow: 0 0 8px rgba(0, 255, 65, 0.7);
  text-transform: uppercase;
}

@keyframes ticker-scroll {
  0% { transform: translate3d(0, 0, 0); }
  100% { transform: translate3d(-100%, 0, 0); }
}

/* Meio: Detalhes */
.dash-details {
  display: flex;
  gap: 12px;
}
.detail-pill {
  flex: 1;
  background: var(--detail-bg-light);
  padding: 12px;
  border-radius: 12px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  display: flex; flex-direction: column; align-items: center; gap: 4px;
}
body.dark .detail-pill { background: var(--detail-bg-dark); }
.detail-label { font-size: 11px; opacity: 0.5; font-weight: 500; text-transform: uppercase; }
.detail-value { display: flex; align-items: center; gap: 6px; }

/* Skeleton Loading */
.skeleton {
  background: linear-gradient(90deg, 
      var(--detail-bg-light) 25%, 
      rgba(0,0,0,0.1) 50%, 
      var(--detail-bg-light) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  color: transparent !important;
  border-radius: 4px;
  display: inline-block;
  min-width: 40px;
  user-select: none;
}
body.dark .skeleton {
  background: linear-gradient(90deg, 
      var(--detail-bg-dark) 25%, 
      rgba(255,255,255,0.1) 50%, 
      var(--detail-bg-dark) 75%
  );
}
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Baixo: Previs√£o */
.forecast-row {
  display: flex;
  justify-content: space-between;
  border-top: 1px solid var(--border-light);
  padding-top: 20px;
}
body.dark .forecast-row { border-top: 1px solid var(--border-dark); }

.forecast-item {
  text-align: center;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.f-day { font-size: 13px; font-weight: 600; opacity: 0.7; margin-bottom: 2px; text-transform: uppercase; }
.f-icon { font-size: 26px; line-height: 1.2; margin-bottom: 2px; } 
.f-temp { font-size: 16px; font-weight: 700; }
.f-min { font-size: 12px; opacity: 0.5; margin-left: 4px; }

/* Footer */
.site-footer {
  margin-top: auto; padding-top: 60px; text-align: center; padding-bottom: 20px;
}
.donation-card {
  display: inline-flex; flex-direction: column; align-items: center;
  padding: 24px 40px; margin: 0 auto;
  background: var(--glass-light);
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-light);
  border-radius: 20px;
}
body.dark .donation-card {
  background: var(--glass-dark);
  border: 1px solid var(--border-dark);
  box-shadow: var(--shadow-dark);
}

.donation-title { font-size: 18px; font-weight: 700; margin-bottom: 6px; }
.donation-desc { font-size: 14px; opacity: 0.7; margin-bottom: 18px; line-height: 1.4; }

.btn-donate {
  position: relative; display: flex; align-items: center; gap: 8px;
  padding: 10px 20px; border-radius: 12px; border: none;
  background: linear-gradient(135deg, #32bcad 0%, #229a8e 100%);
  color: #fff; font-size: 15px; font-weight: 600; cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 4px 12px rgba(50, 188, 173, 0.3);
}
.btn-donate:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(50, 188, 173, 0.4); }
.btn-donate:active { transform: translateY(0); }

.copy-feedback {
  position: absolute; top: -35px; background: #333; color: #fff;
  padding: 4px 10px; border-radius: 6px; font-size: 12px; opacity: 0;
  pointer-events: none; transform: translateY(10px); transition: all 0.2s;
}
.copy-feedback.show { opacity: 1; transform: translateY(0); }

.footer-credit {
  display: block; margin-top: 25px; font-size: 11px; opacity: 0.4;
  color: inherit; text-decoration: none; transition: opacity 0.2s;
}
.footer-credit:hover { opacity: 1; text-decoration: underline; }

</style>
</head>

<body>

<div class="site">

  <header class="header">
    <div class="title-box">
      <h1>Orindi√∫va</h1>
      <div class="status-badge">
        <div class="pulse"></div> Em Tempo Real
      </div>
    </div>

    <button id="themeToggle" class="theme-toggle" aria-label="Alternar tema">
      <span id="moonIcon">üåô</span>
      <span id="sunIcon" style="display:none">‚òÄÔ∏è</span>
    </button>
  </header>

  <section class="video-container">
    <iframe
      src="https://www.youtube.com/embed/VIDEO_ID_AQUI?autoplay=1&mute=1&controls=1&rel=0&modestbranding=1"
      title="C√¢mera ao vivo"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen>
    </iframe>
  </section>

  <div class="dashboard-card">
    
    <div class="dash-top">
      <div class="current-weather">
        <h2 id="currTemp" class="skeleton">--¬∞C</h2>
        <p id="currCond" class="skeleton">Carregando...</p>
      </div>
      <div class="clock-area">
        <div class="clock-time" id="clockTime">--:--:--</div>
        <div class="clock-date" id="clockDate">--</div>
      </div>
    </div>

    <div class="ticker-wrap">
      <div class="ticker" id="newsTicker">
        <div class="ticker-item">CONECTANDO BASES REGIONAIS...</div>
      </div>
    </div>

    <div class="dash-details">
      <div class="detail-pill">
        <span class="detail-label">üí® Vento</span>
        <span id="windSpeed" class="skeleton">-- km/h</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label">üî∫ M√°x</span>
        <span id="maxTemp" class="skeleton">--¬∞C</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label">üîª M√≠n</span>
        <span id="minTemp" class="skeleton">--¬∞C</span>
      </div>
    </div>

    <div class="dash-details">
      <div class="detail-pill">
        <span class="detail-label">üåÖ Nascer Sol</span>
        <span id="sunriseTime" class="detail-value skeleton">--:--</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label">üåá P√¥r do Sol</span>
        <span id="sunsetTime" class="detail-value skeleton">--:--</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label" id="moonLabel">üåô Lua</span>
        <span id="moonPhase" class="detail-value skeleton">--</span>
      </div>
    </div>

    <div class="forecast-row" id="forecastBox">
      <div class="forecast-item skeleton">...</div>
      <div class="forecast-item skeleton">...</div>
      <div class="forecast-item skeleton">...</div>
    </div>

  </div>

  <footer class="site-footer">
    <div class="donation-card">
      <div class="donation-title">Gostou?</div>
      <div class="donation-desc">Ajude a manter a c√¢mera online. Qualquer valor √© bem-vindo! üòÅ</div>
      
      <button class="btn-donate" id="pixButton">
        <div class="copy-feedback" id="pixFeedback">Copiado!</div>
        <span style="font-size: 20px; line-height: 1;">üíµ</span>
        Copiar Chave Pix
      </button>
    </div>

    <a href="http://mateusfrmacedo.github.io" target="_blank" class="footer-credit">create by Mateus</a>
  </footer>

</div>

<script>
/* --- CONFIG --- */
const CHAVE_PIX = "mateus.freitas@me.com";

/* 1. Tema Inteligente */
const themeBtn = document.getElementById('themeToggle');
const sun = document.getElementById('sunIcon');
const moon = document.getElementById('moonIcon');
const userPref = localStorage.getItem('theme');
const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
let currentTheme = userPref || (systemDark ? 'dark' : 'light');

function updateThemeUI(t){
  if(t === 'dark'){
    document.body.classList.add('dark');
    sun.style.display = 'block'; 
    moon.style.display = 'none'; 
  } else {
    document.body.classList.remove('dark');
    sun.style.display = 'none';  
    moon.style.display = 'block';
  }
}
updateThemeUI(currentTheme);
themeBtn.onclick = () => {
  currentTheme = (currentTheme === 'dark') ? 'light' : 'dark';
  updateThemeUI(currentTheme);
  localStorage.setItem('theme', currentTheme);
};

/* 2. Rel√≥gio */
function updateClock(){
  const n = new Date();
  const t = n.toLocaleTimeString('pt-BR', {hour:"2-digit", minute:"2-digit", second:"2-digit"});
  const d = n.toLocaleDateString('pt-BR', {weekday:"long", day:"numeric", month:"long"});
  document.getElementById('clockTime').textContent = t;
  document.getElementById('clockDate').textContent = d;
}
setInterval(updateClock, 1000);
updateClock();

/* 3. Fun√ß√£o de Fase da Lua */
function getMoonPhase(date) {
  const cycles = 29.5305882;
  const knownNewMoon = new Date('2000-01-06T18:14:00Z');
  const diffDays = (date.getTime() - knownNewMoon.getTime()) / 86400000;
  const phaseIndex = (diffDays % cycles) / cycles;

  if(phaseIndex < 0.03) return { icon: 'üåë', text: 'Nova' };
  if(phaseIndex < 0.22) return { icon: 'üåí', text: 'Crescente' };
  if(phaseIndex < 0.28) return { icon: 'üåì', text: 'Q. Cresc.' };
  if(phaseIndex < 0.47) return { icon: 'üåî', text: 'Gibosa' };
  if(phaseIndex < 0.53) return { icon: 'üåï', text: 'Cheia' };
  if(phaseIndex < 0.72) return { icon: 'üåñ', text: 'Gibosa' };
  if(phaseIndex < 0.78) return { icon: 'üåó', text: 'Q. Ming.' };
  if(phaseIndex < 0.97) return { icon: 'üåò', text: 'Minguante' };
  return { icon: 'üåë', text: 'Nova' };
}

/* --- BANCO DE FRASES CLIM√ÅTICAS (SEM EMOJIS) --- */
const phrases = {
  storm: [
    "ALERTA: TEMPESTADE NA REGIAO FIQUE EM SEGURANCA",
    "TEMPO FECHADO: TIRE OS ELETRONICOS DA TOMADA",
    "ZEUS ESTA BRAVO: MUITOS RAIOS PREVISTOS",
    "CUIDADO: RISCO DE TEMPORAL AGORA"
  ],
  rain: [
    "VAI CHOVER: CORRE TIRA A ROUPA DO VARAL",
    "TEMPO MOLHADO: NAO ESQUECA O GUARDA-CHUVA",
    "CHUVA: BOM PARA DORMIR RUIM PARA LAVAR O CARRO",
    "MOTORISTA: PISTA MOLHADA REDOBRE A ATENCAO",
    "REGIAO MOLHADA: AGUA VAI CAIR DO CEU HOJE"
  ],
  heat: [
    "SOL FORTE: DA PRA FRITAR OVO NA CALCADA",
    "ALERTA DE CALOR: O AR CONDICIONADO E SEU MELHOR AMIGO",
    "TEMPERATURA ALTA: BEBA MUITA AGUA",
    "MUITO QUENTE: USE PROTETOR SOLAR SE SAIR",
    "CALOR: A CONTA DE LUZ VAI VIR ALTA"
  ],
  cold: [
    "FRIO: TIRE O CASACO DO ARMARIO",
    "TEMPERATURA BAIXA: ACEITA-SE DOACAO DE CAFE",
    "FRIOZINHO: BOM PARA FICAR EM BAIXO DAS COBERTAS",
    "GELADO: HORA DE TOMAR SOPA QUENTE"
  ],
  clear: [
    "CEU AZUL: DIA PERFEITO PARA PASSEAR",
    "SOL BRILHANDO: APROVEITE O DIA LA FORA",
    "TEMPO BOM: OTIMO PARA LAVAR O CARRO",
    "CLIMA AGRADAVEL: VAMOS PARA A PRACA?"
  ],
  cloudy: [
    "NUBLADO: O SOL ESTA TIMIDO HOJE",
    "NUVENS NO CEU: NEM LA NEM CA",
    "CLIMA CINZA: BOM PARA LER UM LIVRO",
    "TEMPO FECHADO MAS SEM CHUVA POR ENQUANTO"
  ]
};

function getRandomPhrase(type) {
  const list = phrases[type];
  return list[Math.floor(Math.random() * list.length)];
}

function stripEmojis(str) {
  return str.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '')
            .replace(/\s+/g, ' ').trim();
}

/* --- DADOS EXTERNOS & REGIONAIS --- */

// 1. AwesomeAPI (Economia)
async function getEconomy() {
  try {
    const r = await fetch('https://economia.awesomeapi.com.br/last/USD-BRL,EUR-BRL,BTC-BRL');
    const d = await r.json();
    return `DOLAR: R$ ${parseFloat(d.USDBRL.bid).toFixed(2)} | EURO: R$ ${parseFloat(d.EURBRL.bid).toFixed(2)}`;
  } catch { return null; }
}

// 2. BrasilAPI (Feriados)
async function getNextHoliday() {
  try {
    const year = new Date().getFullYear();
    const r = await fetch(`https://brasilapi.com.br/api/feriados/v1/${year}`);
    const holidays = await r.json();
    const today = new Date(); today.setHours(0,0,0,0);
    const next = holidays.find(h => new Date(h.date+'T12:00:00') >= today);
    if(next) {
      const day = next.date.split('-').reverse().slice(0,2).join('/');
      return `PROXIMO FERIADO: ${day} - ${next.name.toUpperCase()}`;
    }
    return null;
  } catch { return null; }
}

// 3. Frases Motivacionais (ThiagoMGO)
async function getMotivation() {
  try {
    const r = await fetch('https://raw.githubusercontent.com/thiagomgo/pensamentos/master/phrases.json');
    if(!r.ok) return null;
    const data = await r.json();
    const item = data[Math.floor(Math.random() * data.length)];
    return `${item.phrase.toUpperCase()} - ${item.author.toUpperCase()}`;
  } catch { return null; }
}

/* --- CLIMA MULTI-CIDADES (OPEN-METEO) --- */
// Coordenadas: Orindi√∫va, Rio Preto, S√£o Paulo
const CITIES = {
  orindiuva: { lat: -20.1819, lon: -49.3508 },
  riopreto:  { lat: -20.8197, lon: -49.3797 },
  saopaulo:  { lat: -23.5505, lon: -46.6333 }
};

// Busca clima de todas as cidades de uma vez
async function fetchAllWeather() {
  const latStr = `${CITIES.orindiuva.lat},${CITIES.riopreto.lat},${CITIES.saopaulo.lat}`;
  const lonStr = `${CITIES.orindiuva.lon},${CITIES.riopreto.lon},${CITIES.saopaulo.lon}`;
  
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${latStr}&longitude=${lonStr}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode,sunrise,sunset&timezone=America%2FSao_Paulo`;
  
  const r = await fetch(url);
  const data = await r.json();
  // Open-Meteo retorna array se forem varias coordenadas
  return Array.isArray(data) ? data : [data]; 
}

/* --- GERENCIADOR PRINCIPAL --- */
async function updateEverything() {
  try {
    // Carrega clima de todas
    const weatherList = await fetchAllWeather();
    const local = weatherList[0]; // Orindi√∫va
    const region = weatherList[1]; // Rio Preto
    const capital = weatherList[2]; // SP

    // 1. Atualiza Dashboard Principal (Orindi√∫va)
    updateDashboard(local);

    // 2. Atualiza Ticker com Dados Regionais e Curiosidades
    await updateTicker(local, region, capital);

  } catch(e) {
    console.error("Erro geral:", e);
    document.getElementById('currCond').textContent = "Erro Conexao";
  }
}

function updateDashboard(data) {
  const curr = data.current_weather;
  const daily = data.daily;

  updateData('currTemp', Math.round(curr.temperature) + "¬∞C");
  updateData('windSpeed', Math.round(curr.windspeed) + " km/h");
  updateData('maxTemp', Math.round(daily.temperature_2m_max[0]) + "¬∞C");
  updateData('minTemp', Math.round(daily.temperature_2m_min[0]) + "¬∞C");

  let label = "Nublado";
  const c = curr.weathercode;
  if(c === 0) label = "C√©u Limpo";
  else if([1,2,3].includes(c)) label = "Parc. Nublado";
  else if([45,48].includes(c)) label = "Neblina";
  else if([51,53,55,61,63,65,80,81,82].includes(c)) label = "Chuva";
  else if([95,96,99].includes(c)) label = "Tempestade";
  
  updateData('currCond', label);

  const sunriseFull = daily.sunrise[0];
  const sunsetFull = daily.sunset[0];
  updateData('sunriseTime', sunriseFull.split('T')[1]);
  updateData('sunsetTime', sunsetFull.split('T')[1]);

  const moon = getMoonPhase(new Date());
  updateData('moonPhase', moon.text);
  const labelEl = document.getElementById('moonLabel');
  if(labelEl) labelEl.textContent = moon.icon + " Lua"; // √çcone s√≥ aqui, n√£o no ticker

  // Previs√£o 3 dias
  const forecastBox = document.getElementById('forecastBox');
  forecastBox.innerHTML = ''; 
  for(let i=1; i<=3; i++){
    const date = new Date(daily.time[i] + "T00:00:00"); 
    const dayName = date.toLocaleDateString('pt-BR', {weekday:'short'}).replace('.','');
    const max = Math.round(daily.temperature_2m_max[i]);
    const min = Math.round(daily.temperature_2m_min[i]);
    const code = daily.weathercode[i];
    let icon = "‚õÖ";
    if(code === 0) icon = "‚òÄÔ∏è";
    else if([51,53,55,61,63,65,80,81,82].includes(code)) icon = "üåßÔ∏è";
    else if([95,96,99].includes(code)) icon = "‚õàÔ∏è";

    forecastBox.innerHTML += `
      <div class="forecast-item">
        <div class="f-day">${dayName}</div>
        <div class="f-icon">${icon}</div>
        <div><span class="f-temp">${max}¬∞C</span> <span class="f-min">${min}¬∞C</span></div>
      </div>`;
  }
}

async function updateTicker(local, region, capital) {
  const tickerEl = document.getElementById('newsTicker');
  tickerEl.style.animation = 'none';
  tickerEl.offsetHeight; 

  const dateStr = new Date().toLocaleDateString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long'});
  
  let msgs = [];
  msgs.push(`HOJE: ${dateStr.toUpperCase()}`);
  
  // Clima Regional
  const tempRio = Math.round(region.current_weather.temperature);
  const tempSP = Math.round(capital.current_weather.temperature);
  msgs.push(`RIO PRETO: ${tempRio}C`);
  msgs.push(`SAO PAULO: ${tempSP}C`);

  // Economia
  const econ = await getEconomy();
  if(econ) msgs.push(econ);

  // Feriado
  const holiday = await getNextHoliday();
  if(holiday) msgs.push(stripEmojis(holiday));

  // Frase Clim√°tica baseada em Orindi√∫va
  const code = local.current_weather.weathercode;
  const temp = local.current_weather.temperature;
  let type = 'cloudy';
  if (code >= 95) type = 'storm';
  else if (code >= 51) type = 'rain';
  else if (temp >= 30) type = 'heat';
  else if (temp <= 15) type = 'cold';
  else if (code === 0) type = 'clear';
  msgs.push(getRandomPhrase(type));

  // Motiva√ß√£o
  const motiv = await getMotivation();
  if(motiv) msgs.push(stripEmojis(motiv));

  msgs.push("CAMERA AO VIVO 24H");

  const fullText = msgs.map(m => `*** ${m} ***`).join("      ");
  tickerEl.innerHTML = `<span class="ticker-item">${fullText}</span>`;
  
  // Velocidade
  const duration = Math.max(30, fullText.length * 14 / 60);
  tickerEl.style.animation = `ticker-scroll ${duration}s linear infinite`;
}

function updateData(id, text) {
  const el = document.getElementById(id);
  if (el) { el.textContent = text; el.classList.remove('skeleton'); }
}

// Inicia
updateEverything();
setInterval(updateEverything, 600000); // A cada 10 min

/* Pix */
const pixBtn = document.getElementById('pixButton');
const feedback = document.getElementById('pixFeedback');
pixBtn.onclick = () => {
  navigator.clipboard.writeText(CHAVE_PIX).then(() => {
    feedback.classList.add('show');
    setTimeout(() => feedback.classList.remove('show'), 2000);
  }).catch(() => alert("Pix: " + CHAVE_PIX));
};
</script>

</body>
</html>
