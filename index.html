<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="description" content="Acompanhe Orindi√∫va ao vivo.">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå•Ô∏è</text></svg>">

<title>Orindi√∫va Ao Vivo</title>

<style>
:root {
  --sf: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  
  /* Cores Light */
  --bg-light: #f2f2f7;
  --text-light: #1c1c1e;
  --glass-light: #ffffff;
  --border-light: rgba(0, 0, 0, 0.05);
  --shadow-light: 0 4px 12px rgba(0,0,0,0.06);
  --detail-bg-light: rgba(0,0,0,0.04);

  /* Cores Dark */
  --bg-dark: #000000;
  --text-dark: #f2f2f7;
  --glass-dark: #1c1c1e;
  --border-dark: rgba(255, 255, 255, 0.1);
  --shadow-dark: 0 4px 12px rgba(0,0,0,0.5);
  --detail-bg-dark: rgba(255,255,255,0.06);
}

* { box-sizing: border-box; }

html, body {
  margin: 0; padding: 0; height: 100%;
  font-family: var(--sf);
  background-color: var(--bg-light);
  color: var(--text-light);
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow-x: hidden;
}

body.dark {
  background-color: var(--bg-dark);
  color: var(--text-dark);
}

/* Layout */
.site {
  max-width: 1000px;
  margin: 0 auto;
  padding: 40px 24px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Header */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 25px;
}

.title-box h1 {
  margin: 0;
  font-size: clamp(40px, 8vw, 64px);
  font-weight: 800;
  letter-spacing: -2px;
  line-height: 1.1;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 700;
  color: #ff3b30;
  background: rgba(255, 59, 48, 0.1);
  padding: 4px 10px;
  border-radius: 20px;
  margin-top: 8px;
  text-transform: uppercase;
}
.pulse {
  width: 8px; height: 8px;
  background: currentColor;
  border-radius: 50%;
  animation: pulse 1.5s infinite;
}
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: .4; } 100% { opacity: 1; } }

/* Bot√£o Tema */
.theme-toggle {
  width: 44px; height: 44px;
  border-radius: 50%;
  border: 1px solid var(--border-light);
  cursor: pointer;
  background: var(--glass-light);
  box-shadow: var(--shadow-light);
  display: grid; place-items: center;
  padding: 0; font-size: 22px; line-height: 1;
  transition: all 0.3s;
}
body.dark .theme-toggle {
  background: var(--glass-dark);
  border: 1px solid var(--border-dark);
  box-shadow: var(--shadow-dark);
}
.theme-toggle:active { transform: scale(0.92); }
.theme-toggle span { user-select: none; }

/* --- DASHBOARD --- */
.dashboard-card {
  background: var(--glass-light);
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-light);
  border-radius: 24px;
  padding: 24px;
  margin-bottom: 24px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
body.dark .dashboard-card {
  background: var(--glass-dark);
  border: 1px solid var(--border-dark);
  box-shadow: var(--shadow-dark);
}

/* Topo: Clima Atual + Rel√≥gio */
.dash-top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}
.current-weather h2 { margin: 0; font-size: 42px; font-weight: 700; letter-spacing: -1px; }
.current-weather p { margin: 4px 0 0; font-size: 18px; font-weight: 500; opacity: 0.8; }

.clock-area { text-align: right; }
.clock-time { font-size: 28px; font-weight: 600; font-variant-numeric: tabular-nums; }
.clock-date { font-size: 14px; opacity: 0.6; margin-top: 4px; text-transform: capitalize; }

/* Meio: Detalhes */
.dash-details {
  display: flex;
  gap: 12px;
}
.detail-pill {
  flex: 1;
  background: var(--detail-bg-light);
  padding: 12px;
  border-radius: 12px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  display: flex; flex-direction: column; align-items: center; gap: 4px;
}
body.dark .detail-pill { background: var(--detail-bg-dark); }
.detail-label { font-size: 11px; opacity: 0.5; font-weight: 500; text-transform: uppercase; }
.detail-value { display: flex; align-items: center; gap: 6px; }

/* Baixo: Previs√£o com Emojis */
.forecast-row {
  display: flex;
  justify-content: space-between;
  border-top: 1px solid var(--border-light);
  padding-top: 20px;
}
body.dark .forecast-row { border-top: 1px solid var(--border-dark); }

.forecast-item {
  text-align: center;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.f-day { font-size: 13px; font-weight: 600; opacity: 0.7; margin-bottom: 2px; text-transform: uppercase; }
.f-icon { font-size: 26px; line-height: 1.2; margin-bottom: 2px; } 
.f-temp { font-size: 16px; font-weight: 700; }
.f-min { font-size: 12px; opacity: 0.5; margin-left: 4px; }

/* V√≠deo */
.video-container {
  position: relative;
  width: 100%;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0,0,0,0.12);
  aspect-ratio: 16/9;
  background: #000;
}
.video-container iframe { width: 100%; height: 100%; border: 0; }

/* Footer */
.site-footer {
  margin-top: auto; padding-top: 60px; text-align: center; padding-bottom: 20px;
}
.donation-card {
  display: inline-flex; flex-direction: column; align-items: center;
  padding: 24px 40px; margin: 0 auto;
  background: var(--glass-light);
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-light);
  border-radius: 20px;
}
body.dark .donation-card {
  background: var(--glass-dark);
  border: 1px solid var(--border-dark);
  box-shadow: var(--shadow-dark);
}

.donation-title { font-size: 18px; font-weight: 700; margin-bottom: 6px; }
.donation-desc { font-size: 14px; opacity: 0.7; margin-bottom: 18px; line-height: 1.4; }

.btn-donate {
  position: relative; display: flex; align-items: center; gap: 8px;
  padding: 10px 20px; border-radius: 12px; border: none;
  background: linear-gradient(135deg, #32bcad 0%, #229a8e 100%);
  color: #fff; font-size: 15px; font-weight: 600; cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 4px 12px rgba(50, 188, 173, 0.3);
}
.btn-donate:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(50, 188, 173, 0.4); }
.btn-donate:active { transform: translateY(0); }

.copy-feedback {
  position: absolute; top: -35px; background: #333; color: #fff;
  padding: 4px 10px; border-radius: 6px; font-size: 12px; opacity: 0;
  pointer-events: none; transform: translateY(10px); transition: all 0.2s;
}
.copy-feedback.show { opacity: 1; transform: translateY(0); }

.footer-credit {
  display: block; margin-top: 25px; font-size: 11px; opacity: 0.4;
  color: inherit; text-decoration: none; transition: opacity 0.2s;
}
.footer-credit:hover { opacity: 1; text-decoration: underline; }

</style>
</head>

<body>

<div class="site">

  <header class="header">
    <div class="title-box">
      <h1>Orindi√∫va</h1>
      <div class="status-badge">
        <div class="pulse"></div> Em Tempo Real
      </div>
    </div>

    <button id="themeToggle" class="theme-toggle" aria-label="Alternar tema">
      <span id="moonIcon">üåô</span>
      <span id="sunIcon" style="display:none">‚òÄÔ∏è</span>
    </button>
  </header>

  <div class="dashboard-card">
    
    <div class="dash-top">
      <div class="current-weather">
        <h2 id="currTemp">--¬∞C</h2>
        <p id="currCond">Carregando...</p>
      </div>
      <div class="clock-area">
        <div class="clock-time" id="clockTime">--:--:--</div>
        <div class="clock-date" id="clockDate">--</div>
      </div>
    </div>

    <div class="dash-details">
      <div class="detail-pill">
        <span class="detail-label">Vento</span>
        <span id="windSpeed">-- km/h</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label">M√°x</span>
        <span id="maxTemp">--¬∞C</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label">M√≠n</span>
        <span id="minTemp">--¬∞C</span>
      </div>
    </div>

    <div class="dash-details">
      <div class="detail-pill">
        <span class="detail-label">Nascer Sol</span>
        <span id="sunriseTime" class="detail-value">--:--</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label">P√¥r do Sol</span>
        <span id="sunsetTime" class="detail-value">--:--</span>
      </div>
      <div class="detail-pill">
        <span class="detail-label">Lua</span>
        <span id="moonPhase" class="detail-value">--</span>
      </div>
    </div>

    <div class="forecast-row" id="forecastBox">
      <div class="forecast-item">...</div>
      <div class="forecast-item">...</div>
      <div class="forecast-item">...</div>
    </div>

  </div>

  <section class="video-container">
    <iframe
      src="https://www.youtube.com/embed/YOUR_VIDEO_ID?autoplay=1&mute=1&controls=1&rel=0&modestbranding=1"
      title="C√¢mera ao vivo"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen>
    </iframe>
  </section>

  <footer class="site-footer">
    <div class="donation-card">
      <div class="donation-title">Gostou?</div>
      <div class="donation-desc">Ajude a manter a c√¢mera online. Qualquer valor √© bem-vindo! üòÅ</div>
      
      <button class="btn-donate" id="pixButton">
        <div class="copy-feedback" id="pixFeedback">Copiado!</div>
        <span style="font-size: 20px; line-height: 1;">üíµ</span>
        Copiar Chave Pix
      </button>
    </div>

    <a href="http://mateusfrmacedo.github.io" target="_blank" class="footer-credit">create by Mateus</a>
  </footer>

</div>

<script>
/* --- CONFIG --- */
const CHAVE_PIX = "mateus.freitas@me.com";

/* 1. Tema Inteligente */
const themeBtn = document.getElementById('themeToggle');
const sun = document.getElementById('sunIcon');
const moon = document.getElementById('moonIcon');

const userPref = localStorage.getItem('theme');
const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

let currentTheme = userPref || (systemDark ? 'dark' : 'light');

function updateThemeUI(t){
  if(t === 'dark'){
    document.body.classList.add('dark');
    sun.style.display = 'block'; 
    moon.style.display = 'none'; 
  } else {
    document.body.classList.remove('dark');
    sun.style.display = 'none';  
    moon.style.display = 'block';
  }
}
updateThemeUI(currentTheme);

themeBtn.onclick = () => {
  currentTheme = (currentTheme === 'dark') ? 'light' : 'dark';
  updateThemeUI(currentTheme);
  localStorage.setItem('theme', currentTheme);
};

/* 2. Rel√≥gio */
function updateClock(){
  const n = new Date();
  const t = n.toLocaleTimeString('pt-BR', {hour:"2-digit", minute:"2-digit", second:"2-digit"});
  const d = n.toLocaleDateString('pt-BR', {weekday:"long", day:"numeric", month:"long"});
  
  document.getElementById('clockTime').textContent = t;
  document.getElementById('clockDate').textContent = d;
}
setInterval(updateClock, 1000);
updateClock();

/* 3. Fun√ß√£o de Fase da Lua */
function getMoonPhase(date) {
  const cycles = 29.5305882;
  const knownNewMoon = new Date('2000-01-06T18:14:00Z');
  const diffDays = (date.getTime() - knownNewMoon.getTime()) / 86400000;
  const phaseIndex = (diffDays % cycles) / cycles;

  if(phaseIndex < 0.03) return 'üåë Nova';
  if(phaseIndex < 0.22) return 'üåí Crescente';
  if(phaseIndex < 0.28) return 'üåì Q. Cresc.';
  if(phaseIndex < 0.47) return 'üåî Gibosa';
  if(phaseIndex < 0.53) return 'üåï Cheia';
  if(phaseIndex < 0.72) return 'üåñ Gibosa';
  if(phaseIndex < 0.78) return 'üåó Q. Ming.';
  if(phaseIndex < 0.97) return 'üåò Minguante';
  return 'üåë Nova';
}

/* 4. Clima + Astro + Previs√£o */
async function loadWeather(){
  try {
    const r = await fetch("https://api.open-meteo.com/v1/forecast?latitude=-20.18194&longitude=-49.35083&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode,sunrise,sunset&timezone=America%2FSao_Paulo");
    const j = await r.json();
    
    const curr = j.current_weather;
    const daily = j.daily;

    // --- Atual (com C) ---
    document.getElementById('currTemp').textContent = Math.round(curr.temperature) + "¬∞C";
    document.getElementById('windSpeed').textContent = Math.round(curr.windspeed) + " km/h";
    
    // --- Max e Min Hoje (com C) ---
    document.getElementById('maxTemp').textContent = Math.round(daily.temperature_2m_max[0]) + "¬∞C";
    document.getElementById('minTemp').textContent = Math.round(daily.temperature_2m_min[0]) + "¬∞C";

    let label = "Nublado";
    const c = curr.weathercode;
    if(c === 0) label = "C√©u Limpo";
    else if([1,2,3].includes(c)) label = "Parc. Nublado";
    else if([45,48].includes(c)) label = "Neblina";
    else if([51,53,55,61,63,65,80,81,82].includes(c)) label = "Chuva";
    else if([95,96,99].includes(c)) label = "Tempestade";
    document.getElementById('currCond').textContent = label;

    // --- Sol e Lua ---
    const sunriseFull = daily.sunrise[0];
    const sunsetFull = daily.sunset[0];
    document.getElementById('sunriseTime').textContent = sunriseFull.split('T')[1];
    document.getElementById('sunsetTime').textContent = sunsetFull.split('T')[1];
    document.getElementById('moonPhase').textContent = getMoonPhase(new Date());

    // --- Previs√£o Pr√≥ximos 3 Dias (com C) ---
    const forecastBox = document.getElementById('forecastBox');
    forecastBox.innerHTML = ''; 

    for(let i=1; i<=3; i++){
      const date = new Date(daily.time[i] + "T00:00:00"); 
      const dayName = date.toLocaleDateString('pt-BR', {weekday:'short'}).replace('.','');
      const max = Math.round(daily.temperature_2m_max[i]);
      const min = Math.round(daily.temperature_2m_min[i]);
      const code = daily.weathercode[i];

      let icon = "‚õÖ";
      if(code === 0) icon = "‚òÄÔ∏è";
      else if([1,2,3].includes(code)) icon = "‚õÖ";
      else if([45,48].includes(code)) icon = "üå´Ô∏è";
      else if([51,53,55,61,63,65,80,81,82].includes(code)) icon = "üåßÔ∏è";
      else if([95,96,99].includes(code)) icon = "‚õàÔ∏è";

      const html = `
        <div class="forecast-item">
          <div class="f-day">${dayName}</div>
          <div class="f-icon">${icon}</div>
          <div>
            <span class="f-temp">${max}¬∞C</span>
            <span class="f-min">${min}¬∞C</span>
          </div>
        </div>
      `;
      forecastBox.innerHTML += html;
    }

  } catch(e) {
    console.error(e);
    document.getElementById('currTemp').textContent = "--";
    document.getElementById('currCond').textContent = "Erro";
  }
}
loadWeather();
setInterval(loadWeather, 600000);

/* 5. Pix */
const pixBtn = document.getElementById('pixButton');
const feedback = document.getElementById('pixFeedback');

pixBtn.onclick = () => {
  navigator.clipboard.writeText(CHAVE_PIX).then(() => {
    feedback.classList.add('show');
    setTimeout(() => feedback.classList.remove('show'), 2000);
  }).catch(() => alert("Pix: " + CHAVE_PIX));
};
</script>

</body>
</html>
